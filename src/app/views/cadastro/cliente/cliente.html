<app-page-title title="Clientes" subTitle="Cadastro"/>

<div class="card shadow-sm">
  <div class="card-body p-0">
    <ng-container *ngIf="loading(); else content">
      <div class="py-5 text-center text-muted">Carregando clientes...</div>
    </ng-container>

    <ng-template #content>
      <ng-container *ngIf="error(); else clientesTable">
        <div class="alert alert-danger m-3" role="alert">
          {{ error() }}
        </div>
      </ng-container>
    </ng-template>

    <ng-template #clientesTable>
      <ng-container *ngIf="clientes().length > 0; else emptyState">
        <div class="table-responsive">
          <table class="table table-hover align-middle mb-0">
            <thead class="table-light">
              <tr>
                <th scope="col">Nome</th>
                <th scope="col">Documento</th>
                <th scope="col">Telefone</th>
                <th scope="col">E-mail</th>
                <th scope="col">Criado em</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let cliente of clientes(); trackBy: trackByCliente">
                <td class="fw-semibold">{{ cliente.nome || '—' }}</td>
                <td>{{ cliente.documento || '—' }}</td>
                <td>{{ cliente.telefone || '—' }}</td>
                <td>{{ cliente.email || '—' }}</td>
                <td>
                  {{ cliente.createdAt ? (cliente.createdAt | date: 'short') : '—' }}
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </ng-container>
    </ng-template>

    <ng-template #emptyState>
      <div class="py-5 text-center text-muted">
        Nenhum cliente cadastrado no momento.
      </div>
    </ng-template>
  </div>
</div>
