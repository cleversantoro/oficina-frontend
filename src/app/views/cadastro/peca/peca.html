<app-page-title title="Peças" subTitle="Cadastro"/>

<div class="card shadow-sm">
  <div class="card-body p-0">
    <ng-container *ngIf="loading(); else content">
      <div class="py-5 text-center text-muted">Carregando peças...</div>
    </ng-container>

    <ng-template #content>
      <ng-container *ngIf="error(); else pecasTable">
        <div class="alert alert-danger m-3" role="alert">
          {{ error() }}
        </div>
      </ng-container>
    </ng-template>

    <ng-template #pecasTable>
      <ng-container *ngIf="pecas().length > 0; else emptyState">
        <div class="table-responsive">
          <table class="table table-hover align-middle mb-0">
            <thead class="table-light">
              <tr>
                <th scope="col">Código</th>
                <th scope="col">Descrição</th>
                <th scope="col" class="text-end">Estoque</th>
                <th scope="col" class="text-end">Preço unitário</th>
                <th scope="col">Fornecedor</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let peca of pecas(); trackBy: trackByPeca">
                <td class="fw-semibold">{{ peca.codigo || '—' }}</td>
                <td>{{ peca.descricao || '—' }}</td>
                <td class="text-end">{{ peca.quantidade ?? '—' }}</td>
                <td class="text-end">
                  {{ peca.preco_Unitario !== undefined ? (peca.preco_Unitario | number: '1.2-2') : '—' }}
                </td>
                <td>{{ peca.fornecedor_Id || '—' }}</td>
              </tr>
            </tbody>
          </table>
        </div>
      </ng-container>
    </ng-template>

    <ng-template #emptyState>
      <div class="py-5 text-center text-muted">
        Nenhuma peça cadastrada no momento.
      </div>
    </ng-template>
  </div>
</div>
